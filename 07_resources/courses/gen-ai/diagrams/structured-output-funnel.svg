<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 550">
  <defs>
    <style>
      .funnel-top { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
      .funnel-middle { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
      .funnel-bottom { fill: #2ecc71; stroke: #27ae60; stroke-width: 2; }
      .text-white { font-family: Arial, sans-serif; font-size: 13px; fill: white; text-anchor: middle; }
      .text-title { font-family: Arial, sans-serif; font-size: 16px; fill: white; font-weight: bold; text-anchor: middle; }
      .text-code { font-family: 'Courier New', monospace; font-size: 12px; fill: white; text-anchor: middle; }
      .main-title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #2c3e50; }
      .label-box { fill: #ecf0f1; stroke: #95a5a6; stroke-width: 2; }
      .label-text { font-family: Arial, sans-serif; font-size: 12px; fill: #2c3e50; }
      .label-title { font-family: Arial, sans-serif; font-size: 14px; fill: #2c3e50; font-weight: bold; }
      .arrow-flow { stroke: #7f8c8d; stroke-width: 3; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#7f8c8d"/>
    </marker>
    <linearGradient id="funnelGradient1" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:0.9" />
      <stop offset="100%" style="stop-color:#c0392b;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="funnelGradient2" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#5dade2;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3498db;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="funnelGradient3" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#52be80;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2ecc71;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" class="main-title">Structured Outputs: The Funnel</text>
  <text x="400" y="50" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 13px; fill: #7f8c8d; font-style: italic;">Transforming unstructured text into clean JSON</text>
  
  <!-- Input Label Box -->
  <rect x="50" y="80" width="300" height="80" rx="10" class="label-box"/>
  <text x="200" y="100" text-anchor="middle" class="label-title">üó£Ô∏è INPUT: Unstructured Text</text>
  <text x="200" y="125" text-anchor="middle" class="label-text">"I'm Lance and I like to bike."</text>
  <text x="200" y="145" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 11px; fill: #7f8c8d; font-style: italic;">Free-form, conversational language</text>
  
  <!-- Arrow from Input to Funnel -->
  <path d="M 200 170 L 300 210" class="arrow-flow"/>
  
  <!-- Funnel Top (Wide opening - Unstructured Input) -->
  <polygon points="200,220 500,220 450,280 250,280" fill="url(#funnelGradient1)" class="funnel-top"/>
  <text x="350" y="245" class="text-title">UNSTRUCTURED</text>
  <text x="350" y="265" class="text-white" style="font-size: 11px;">"Lance... bike... I... like..."</text>
  
  <!-- Funnel Middle (Schema Filter) -->
  <polygon points="250,280 450,280 380,360 320,360" fill="url(#funnelGradient2)" class="funnel-middle"/>
  <text x="350" y="305" class="text-title">SCHEMA FILTER</text>
  <text x="350" y="325" class="text-code" style="font-size: 11px;">{</text>
  <text x="350" y="340" class="text-code" style="font-size: 11px;">name: string,</text>
  <text x="350" y="355" class="text-code" style="font-size: 11px;">interest: string</text>
  
  <!-- Funnel Bottom (Narrow output - Structured JSON) -->
  <polygon points="320,360 380,360 370,420 330,420" fill="url(#funnelGradient3)" class="funnel-bottom"/>
  <rect x="310" y="420" width="80" height="40" fill="url(#funnelGradient3)" class="funnel-bottom"/>
  <text x="350" y="390" class="text-title" style="font-size: 14px;">CLEAN</text>
  <text x="350" y="408" class="text-title" style="font-size: 14px;">JSON</text>
  
  <!-- Arrow from Funnel to Output -->
  <path d="M 350 470 L 450 500" class="arrow-flow"/>
  
  <!-- Output Label Box -->
  <rect x="450" y="80" width="300" height="150" rx="10" class="label-box"/>
  <text x="600" y="100" text-anchor="middle" class="label-title">‚úÖ OUTPUT: Structured JSON</text>
  <rect x="470" y="110" width="260" height="110" rx="5" fill="#2c3e50"/>
  <text x="600" y="135" text-anchor="middle" style="font-family: 'Courier New', monospace; font-size: 13px; fill: #2ecc71; font-weight: bold;">{</text>
  <text x="600" y="155" text-anchor="middle" style="font-family: 'Courier New', monospace; font-size: 12px; fill: #ecf0f1;">  "name": "Lance",</text>
  <text x="600" y="175" text-anchor="middle" style="font-family: 'Courier New', monospace; font-size: 12px; fill: #ecf0f1;">  "interest": "Biking"</text>
  <text x="600" y="195" text-anchor="middle" style="font-family: 'Courier New', monospace; font-size: 13px; fill: #2ecc71; font-weight: bold;">}</text>
  <text x="600" y="215" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 11px; fill: #7f8c8d; font-style: italic;">Easy to parse &amp; integrate</text>
  
  <!-- Schema Detail Box -->
  <rect x="460" y="250" width="280" height="80" rx="10" fill="#3498db" stroke="#2980b9" stroke-width="2"/>
  <text x="600" y="270" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 13px; fill: white; font-weight: bold;">üìã Schema Definition</text>
  <text x="600" y="290" text-anchor="middle" style="font-family: 'Courier New', monospace; font-size: 11px; fill: white;">class Person(BaseModel):</text>
  <text x="600" y="305" text-anchor="middle" style="font-family: 'Courier New', monospace; font-size: 11px; fill: white;">    name: str</text>
  <text x="600" y="320" text-anchor="middle" style="font-family: 'Courier New', monospace; font-size: 11px; fill: white;">    interest: str</text>
  
  <!-- Benefits Box -->
  <rect x="50" y="350" width="380" height="180" rx="10" fill="#ecf0f1" stroke="#3498db" stroke-width="2"/>
  <text x="70" y="375" class="label-title">üí° Why Structured Outputs Matter:</text>
  
  <text x="70" y="400" class="label-text">‚úì <tspan font-weight="bold">Predictable Format:</tspan> Always get valid JSON</text>
  <text x="85" y="418" style="font-family: Arial, sans-serif; font-size: 11px; fill: #7f8c8d;">No more "Sure! Here's your answer..." prefix</text>
  
  <text x="70" y="440" class="label-text">‚úì <tspan font-weight="bold">Easy Integration:</tspan> Direct parsing into code</text>
  <text x="85" y="458" style="font-family: Arial, sans-serif; font-size: 11px; fill: #7f8c8d;">No regex or string manipulation needed</text>
  
  <text x="70" y="480" class="label-text">‚úì <tspan font-weight="bold">Type Safety:</tspan> Schema validation ensures data quality</text>
  <text x="85" y="498" style="font-family: Arial, sans-serif; font-size: 11px; fill: #7f8c8d;">Catch errors before they reach production</text>
  
  <text x="70" y="520" class="label-text">‚ö†Ô∏è <tspan font-weight="bold">Trade-off:</tspan> May reduce reasoning flexibility</text>
  
  <!-- Process Steps -->
  <rect x="460" y="350" width="280" height="180" rx="10" fill="#f39c12" stroke="#d68910" stroke-width="2"/>
  <text x="600" y="375" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 13px; fill: white; font-weight: bold;">‚öôÔ∏è Implementation Steps</text>
  
  <circle cx="480" cy="395" r="12" fill="white"/>
  <text x="480" y="400" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 11px; fill: #f39c12; font-weight: bold;">1</text>
  <text x="500" y="400" style="font-family: Arial, sans-serif; font-size: 11px; fill: white; font-weight: bold;">Define Schema (Pydantic class)</text>
  
  <circle cx="480" cy="425" r="12" fill="white"/>
  <text x="480" y="430" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 11px; fill: #f39c12; font-weight: bold;">2</text>
  <text x="500" y="430" style="font-family: Arial, sans-serif; font-size: 11px; fill: white; font-weight: bold;">Pass to API (response_format)</text>
  
  <circle cx="480" cy="455" r="12" fill="white"/>
  <text x="480" y="460" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 11px; fill: #f39c12; font-weight: bold;">3</text>
  <text x="500" y="460" style="font-family: Arial, sans-serif; font-size: 11px; fill: white; font-weight: bold;">Receive structured output</text>
  
  <circle cx="480" cy="485" r="12" fill="white"/>
  <text x="480" y="490" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 11px; fill: #f39c12; font-weight: bold;">4</text>
  <text x="500" y="490" style="font-family: Arial, sans-serif; font-size: 11px; fill: white; font-weight: bold;">Handle edge cases (refusals, limits)</text>
  
  <text x="600" y="515" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 10px; fill: white; font-style: italic;">Perfect for production systems!</text>
</svg>
